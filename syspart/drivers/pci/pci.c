/*
 * Institute for System Programming of the Russian Academy of Sciences
 * Copyright (C) 2016 ISPRAS
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation, Version 3.
 *
 * This program is distributed in the hope # that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 *
 * See the GNU General Public License version 3 for more details.
 *
 * This file also incorporates work covered by POK License.
 * Copyright (c) 2007-2009 POK team
 */

#include <pci.h>
#include <ioports.h>
#include <stdio.h>

#include <bsp.h>
#include "pci_internal.h"
#include <depl.h>

unsigned pci_driver_table_used_cnt = 0;

#ifdef __PPC__
struct pci_bridge bridge;
#endif

static char *get_pci_class_name(int classcode) {
    int i = 0;
    while (pci_classnames[i].name != NULL) {
        if (pci_classnames[i].classcode == (classcode & 0xFFFF00))
            return pci_classnames[i].name;
        i++;
    }
    return "Unknown";
}

int pci_match_device(const struct pci_device_id *id, const struct pci_device *dev)
{
    if ((id->vendor == PCI_ANY_ID || id->vendor == dev->vendorid) &&
            (id->device == PCI_ANY_ID || id->device == dev->deviceid))
        return 1;
    return 0;
}

void register_pci_driver(struct pci_driver *driver)
{
    pci_driver_table[pci_driver_table_used_cnt++] = *driver;
}

uint32_t pci_read(
        uint32_t bus,
        uint32_t dev,
        uint32_t fun,
        uint32_t reg)
{
    uint32_t addr = (1 << 31) | (bus << 16) | (dev << 11) | 
        (fun << 8) | (reg & 0xfc);
    uint32_t val = -1;

#ifdef __PPC__
    out_be32((uint32_t *) bridge.cfg_addr, addr);
    val = in_le32((uint32_t *) bridge.cfg_data);
#else
    outl(PCI_CONFIG_ADDRESS, addr);
    val = inl(PCI_CONFIG_DATA);
#endif

    return (val >> ((reg & 3) << 3));
}


void pci_write_word(s_pci_device *d, uint32_t reg, uint16_t val)
{
    uint32_t addr = (1 << 31) | (d->bus << 16) | (d->dev << 11) | 
        (d->fun << 8) | (reg & 0xfc);

#ifdef __PPC__
    out_be32((uint32_t *) bridge.cfg_addr, addr);
    out_le16((uint16_t *) bridge.cfg_data, val);
#else
    outl(PCI_CONFIG_ADDRESS, addr);
    outw(PCI_CONFIG_DATA, val);
#endif

}
void pci_write_dword(s_pci_device *d, uint32_t reg, uint32_t val)
{
    uint32_t addr = (1 << 31) | (d->bus << 16) | (d->dev << 11) | 
        (d->fun << 8) | (reg & 0xfc);

#ifdef __PPC__
    out_be32((uint32_t *) bridge.cfg_addr, addr);
    out_le32((uint32_t *) bridge.cfg_data, val);
#else
    outl(PCI_CONFIG_ADDRESS, addr);
    outw(PCI_CONFIG_DATA, val);
#endif

}


void pci_list()
{
    for (unsigned int bus = 0; bus < PCI_BUS_MAX; bus++)
      for (unsigned int dev = 0; dev < PCI_DEV_MAX; dev++)
        for (unsigned int fun = 0; fun < PCI_FUN_MAX; fun++)
        {
            uint16_t vendor = (uint16_t) pci_read(bus, dev, fun, PCI_REG_VENDORID);
            uint16_t device = (uint16_t) pci_read(bus, dev, fun, PCI_REG_DEVICEID);

            if (vendor != 0xFFFF) {
                uint32_t classcode = 0xFFFFFF & pci_read(bus, dev, fun, PCI_REG_PROGIFID);
                printf("%02x:%02x:%02x ", bus, dev, fun);
                printf("%s:\n", get_pci_class_name(classcode));
                printf("\t PCI device %04x:%04x (header 0x%02lx)\n",
                        vendor,
                        device,
                        0xFF & pci_read(bus, dev, fun, PCI_REG_HEADERTYPE));

                uint32_t bar0 = pci_read(bus, dev, fun, PCI_REG_BAR0);
                if (bar0) {
                    printf("\t BAR0: 0x%lx", bar0);
#ifdef __PPC__
                    printf("(addr = %lx)\n", (bar0 & BAR_IOADDR_MASK) + bridge.iorange);
#else
                    printf("(addr = %lx)\n", bar0 & BAR_IOADDR_MASK);
#endif
                }

                /*
                if (classcode == 0x20000) {
                    usigned addr = bar0;
                    printf("MAC addr = ");
                }
                */
            }
        }
}

#define PEX1_PEXOWBAR1 0xc28
#define PEX1_PEXOWAR1  0xc30
#define WAR_EN         0x80000000
#define WAR_RTT_IO     0x00080000
#define WAR_WTT_IO     0x00008000
#define WAR_OWS_8K     0xC

//addr should be 16MB aligned (this is the size of qemu vga mem arrea)
//and 3rd bit equal to 1 means prefetchable memory
#define VGA_ADDR 0xee000008

#define VBE_DISPI_IOPORT_INDEX 0x01CE
#ifdef __PPC__
#define VBE_DISPI_IOPORT_DATA 0x01D0
#else
#define VBE_DISPI_IOPORT_DATA 0x01CF
#endif
enum {
    VBE_DISPI_INDEX_ID, // (0)
    VBE_DISPI_INDEX_XRES, // (1)
    VBE_DISPI_INDEX_YRES, // (2)
    VBE_DISPI_INDEX_BPP, // (3)
    VBE_DISPI_INDEX_ENABLE, // (4)
    VBE_DISPI_INDEX_BANK, // (5)
    VBE_DISPI_INDEX_VIRT_WIDTH, // (6)
    VBE_DISPI_INDEX_VIRT_HEIGHT, // (7)
    VBE_DISPI_INDEX_X_OFFSET, // (8)
    VBE_DISPI_INDEX_Y_OFFSET, // (9)
};

enum {
    VBE_DISPI_BPP_4 = 0x04,
    VBE_DISPI_BPP_8 = 0x08,
    VBE_DISPI_BPP_15 = 0x0F,
    VBE_DISPI_BPP_16 = 0x10,
    VBE_DISPI_BPP_24 = 0x18,
    VBE_DISPI_BPP_32 = 0x20,
};


/* GIMP RGB C-Source image dump (linux_logo_test3.c) */

static const struct {
  unsigned int 	 width;
  unsigned int 	 height;
  unsigned int 	 bytes_per_pixel; /* 2:RGB16, 3:RGB, 4:RGBA */ 
  unsigned char	 pixel_data[80 * 80 * 2 + 1];
} gimp_image = {
  80, 80, 2,
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\40\0\40\0A\10A\10A\10\40\0\40\0\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\40\0A\10a\10\242\20\303\30\343\30\4!\343\30\343"
  "\30\303\30\202\20a\10A\10\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\40\0a\10\303\30E)\2461\10BiJiJiJIJ\10B\2461E)\303\30\202\20A\10\40\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0A\10\242\20E)\10B\252R\10B$!$!\242\20\303\30"
  "\4!\2461\10B\252R(Be)\303\30a\10\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0A\10\303\30\206"
  "1\212R\3079\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0\2461\252R\10B$!\202"
  "\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\40\0\242\20\2061iJ\4!\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\40\0(BiJe)\242\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0\202\20E)\212R\303"
  "\30\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0a\10e)\4!\40\0\0\0E)iJE)\202\20"
  "\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0A\10\343\30\10B\3079\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\303\30\252R,ce)A\10\0\0\3079(B\4!A\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0a\10E)\252RA\10\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\343\30\353Z\353Z\3079\303\30\0\0\40\0iJ\246"
  "1\242\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\40\0\242\20\3479\3479\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\303\30\2461$!\202\20A\10\0\0\0\0\4!\212R$!a\10\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0\343\30iJ\343\30\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0A\10A\10\0\0\0\0\0\0\0\0\0\0"
  "\0\0iJ\2061\202\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0A\10$!\252Ra\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\2461\10B\303\30\40\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0a\10E)\212R\0\0\0\0\0\0\40"
  "\0A\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0a\10A\10\0\0\0\0\0\0\0\0\0\0\202"
  "\20\212R\4!A\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0a\10e)\252R\0\0\0\0\40\0\40\0\242\20\4!\40\0\0\0\0\0\0\0\0\0\0\0\202"
  "\20\4!A\10\2061\242\20\0\0\0\0\0\0\0\0A\10\252RE)a\10\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0a\10e)\252R\0\0\0\0$!\256s\353"
  "Z\242\20\242\20\0\0\0\0\0\0a\10\252RQ\214\24\245\323\234$!\303\30\40\0\0"
  "\0\0\0\0\0\0\0\252Re)a\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0a\10e)\252R\0\0a\10""0\2048\306\30\306\256sA\10\0\0\0\0\40"
  "\0\13c\327\275\232\326\333\336\272\3260\204a\10\40\0\0\0\0\0\0\0\0\0\252"
  "R\2061\202\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0a\10e)\252R\0\0\2461\333\336\30\306\34\347\276\367\3079\0\0\0\0\343"
  "\30\232\326\377\377u\255\317{\373\336]\357IJ\0\0\0\0\0\0\0\0\0\0(B\3079\242"
  "\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0a\10"
  "e)\212R\0\0MkU\255\303\30\252R\34\347\317{A\10a\10e)<\347\367\275\40\0(B"
  "\313Z}\357\363\234\0\0\0\0\0\0\0\0\0\0(B\3079\242\20\40\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0a\10E)\252R\40\0\256sMk\40\0"
  "(B\262\224\20\204\202\20$!\2461\373\336Mk\0\0a\10e)\367\2758\306\0\0\0\0"
  "\0\0\0\0\0\0IJ\3479\242\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0a\10E)\353Za\10,c\20\204\0\0\202\20\256s\5s\341z\341za"
  "b\24\245Mk\0\0\0\0\0\0\30\306\30\306\40\0\0\0\0\0\0\0\0\0IJ\3479\242\20\40"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0A\10$!\313"
  "Za\10\3079\232\326\303\30\40""1\201\233A\345\301\355a\345\201\274a\325\207"
  "\254\301\40\0\0(B\276\367Q\214\0\0\0\0\0\0\0\0\0\0(B\10B\303\30\40\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0A\10$!\252Ra\10A"
  "\10\30\306.\275!\304a\345\241\355\341\355\2\356C\356e\366\202\366\2\356\201"
  "\274\20\336w\326E)\0\0\0\0\0\0\0\0\0\0\2061IJ\343\30\40\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0A\10\4!\252Ra\10\0\0\243z!\304"
  "\1\335\241\355\301\355\2\356\202\366\246\366\307\366\304\366\242\366\202"
  "\366\202\366\301\345\243z\0\0\0\0\0\0\0\0\0\0\2061\212R\4!A\10\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0A\10\4!\212R\343\30@9\300"
  "\263\201\314a\345\241\355\341\355A\356\202\366\311\366\304\366\242\366\242"
  "\366\242\366\301\345a\325\201\274\40\0\0\0\0\0\0\0\0\0\303\30\353ZE)a\10"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0A\10\343\30i"
  "J\2061\40j!\304\341\334\201\355\301\355\2\356\202\366\246\366\245\366\242"
  "\366\242\366\202\366\301\304\201\314\341\334\241\233\0\0\0\0\0\0\0\0\0\0"
  "\40\0\313Z\2461\202\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0A\10\343\30iJe)\242\20\340\212\1\325\241\355\341\355A\356\202\366"
  "\242\366\242\366\202\366\"\315!\274\241\324\341\334\241\324ab\0\0\40\0\246"
  "1a\10\0\0\0\0\3479IJ\343\30A\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0A\10\4!iJ\2061\40\0#Z!\213\201\274\301\345C\356\2\356a\325"
  "\201\274\301\253!\304\241\324\301\324\244\314\355\264\13c\0\0\0\0iJ\256s"
  "\3079\0\0\242\20\313Ze)\202\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0A\10$!\252R\2061\40\0\20\204\316\254A\233\301\253\301\304\201"
  "\274A\304\201\314\201\314\201\314A\304.\275\30\3068\306u\255a\10\0\0\242"
  "\20\256s\256s\242\20\0\0IJ(B\343\30A\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\40\0\202\20\2061,c\303\30A\10Q\214\367\275\316\254A\233A\304"
  "\201\314A\304!\304\300\263d\274\222\275\327\275Y\316\373\336\272\326\10B"
  "\0\0\0\0\2061\3479\40\0\0\0A\10\313Z\2061\202\20\40\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0A\10\4!IJIJ\0\0\40\0\222\2248\306\367\2752\265\307"
  "\233A\233A\233\345\253\316\254\327\275\367\275\232\326\276\367\377\377\377"
  "\377\266\265\40\0\0\0\0\0\0\0\0\0\0\0\0\0\3479IJ\4!a\10\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0A\10\242\20\2461\353Z\202\20\0\0e)]\357\373\336\367"
  "\275\367\275\367\275\327\275\327\275\367\275\367\275\30\306\272\326\236\367"
  "\377\377\377\377\377\377\377\377\212R\0\0\0\0\0\0\0\0\0\0\0\0a\10\252R\246"
  "1\242\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0\202\20e)\313Ze)\202\20"
  "\40\0\266\265\377\377\276\367y\316\367\275\367\275\367\275\367\275\367\275"
  "y\316<\347\337\377\377\377\377\377\377\377\377\377\377\377Y\316a\10\0\0\0"
  "\0\0\0\0\0\0\0\0\0E)\252RE)\202\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0a\10$"
  "!IJ\10B\0\0\40\0\313Z\337\377\377\377\377\377}\3578\306\367\275\367\275\30"
  "\306\373\336\276\367\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\212R\0\0\0\0\0\0\0\0\0\0\0\0\0\0iJ(B\4!a\10\40\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0a\10\4!\10BiJ\40\0\0\0\202\20\333\336\377\377\377\377\377\377\377"
  "\377\276\367\34\347<\347\276\367\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\226\265\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\202\20\313Z\3479\343\30A\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0A\10\303\30\3079\313Z\202"
  "\20\0\0\0\0mk\377\377\377\377\377\377\377\377\377\377\377\377\337\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377<\347\202\20\0\0\0\0\0\0\0\0\0\0\0\0\0\0\202\20\353Z"
  "\2461\303\30A\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\40\0\242\20\2061\313Z\303\30\0\0\0\0a\10\30\306"
  "\337\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\337\377\236\367\2461\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0$!\252R\2061\242\20"
  "\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\40\0a\10$!\212R\4!\0\0\0\0\0\0E)\30\306\276\367\377\377\377\377\377"
  "\377\377\377\337\377\236\367\236\367\337\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\337\377\276\367}\357\34\347<\347,c\40\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0$!\212RE)a\10\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0A\10\303\30\3479\10B\0\0\0\0\0\0\40\0("
  "BU\255y\316]\357\276\367\337\377\337\377}\357\34\347<\347}\357\337\377\337"
  "\377\337\377\276\367<\347\272\326y\316Y\316Y\3168\306Y\316\266\265\202\20"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\3479\10B\343\30A\10\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0a\10E)\212R\202\20\0"
  "\0\0\0\0\0A\10\353Z\266\265\333\336\236\367\337\377\377\377\377\377\337\377"
  "]\357\377\377\377\377\377\377\377\377\377\377\377\377\276\367}\357\34\347"
  "\232\326Y\316\30\306\30\306\232\326\363\234\40\0a\10\2061a\10\0\0\0\0\0\0"
  "\0\0\0\0\40\0\252Re)\202\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\40\0\242\20\2461(B\0\0\0\0A\10\0\0\242\20""4\245<\347"
  "\337\377\377\377\377\377\377\377\377\377\337\377\236\367\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\276\367"
  "<\347y\3168\306\34\347\353Z\0\0\40\0$!\343\30\0\0\0\0\0\0\0\0\0\0\3479\10"
  "B\303\30A\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "A\10\343\30IJ\2061\0\0\303\30\303\30\0\0Mk}\357\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\276\367\333"
  "\336Y\316\232\326a\10\0\0\0\0\343\30\242\20\0\0\0\0\0\0\0\0\202\20\252RE"
  ")a\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0a\10E)\313"
  "Z\242\20\0\0E)\0\0\202\20\333\336\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\337\377"
  "\373\336\333\336,c\0\0a\10\202\20$!A\10\0\0\0\0\0\0\0\0iJ\3079\242\20\40"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0\202\20\2461\212"
  "R\0\0\303\30\242\20\0\0\317{\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\337\377}\3578\306\40\0$!\3079\303\30$!\0\0\0\0\0\0\0\0e)iJ\343\30A\10"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0A\10\343\30IJ\3079\0"
  "\0E)\0\0\242\20<\347\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\337\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\276\367e)$!E)a\10$!a\10\0\0\0\0\0\0\40\0\252Re)a\10\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0a\10E)\313Z\202\20\202\20\303"
  "\30\0\0\256s\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\337\377}\357\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\353Z\40\0\0\0\0\0A\10\4!\0\0\0\0\0\0\0\0IJ\3079\242\20\40"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0A\10\303\30\10B\212R\0\0$!"
  "\40\0a\10\232\326\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\276\367\236\367\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\222\224\0\0\0\0\0\0\0\0e)\0\0\0\0\0\0\0\0E)IJ\343"
  "\30A\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0a\10E)\313Z\303\30\40"
  "\0E)\0\0IJ\337\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\236\367\236\367\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\266\265\0\0\0\0\0\0\0\0e)\0\0\0\0\0\0\0\0A\10\252"
  "R$!A\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0A\10\303\30\10B\212R\0\0\242"
  "\20\202\20\0\0\262\224\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377]\357\236\367\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377y\316\0\0\0\0\0\0\0\0$!\0\0\0\0\0\0\0\0\40"
  "\0\252Re)a\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0\202\20e)\252R\202\20"
  "\0\0\4!A\10\40\0\232\326\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377]\357\236\367\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\373\336\40\0\0\0\0\0\40\0\343\30\0\0"
  "\0\0\0\0\0\0\0\0\212R\2461\202\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0A\10"
  "\303\30\10B\3479\0\0\0\0$!A\10\303\30}\357\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377<\347}\357\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377<\347\40\0\0\0\0\0A\10\343"
  "\30\0\0\0\0\0\0\0\0\0\0\10B\3079\242\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0A\10$!iJ\40\0\0\0\0\0e)a\10E)\276\367\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377<\347\236\367\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377]\357A\10\0\0\0\0\242"
  "\20a\10\0\0\0\0\0\0\0\0\0\0\10B\3479\242\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\40\0\202\20\2061IJ\0\0\0\0a\10(B\4!\3479\337\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377<\347\276\367\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377]\357a\10"
  "\0\0\0\0\343\30\0\0\0\0\0\0\0\0\0\0\0\0\10B\3479\242\20\40\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\40\0\202\20\2461\3479\0\0\0\0\0\0\343\30e)(B\337\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377<\347"
  "\276\367\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\34\347A\10\0\0\40\0\343\30\0\0\0\0\0\0\0\0\0\0\0\0\10B\3079\242"
  "\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0\242\20\3079\3479\0\0\0\0\0\0\0"
  "\0\343\30iJ\337\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377<\347\276\367\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377y\316\0\0\242\20\4!`\20\242\20\303\30\202\20"
  "\40\0\0\0\0\0\212R\2461\202\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0\303\30"
  "\3479Mk\241I!\274\1\325\341z\40\0\3479}\357\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377<\347\276\367\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\363\234\202\20a\10\0"
  "\0\0\0\0\0\40\0\202\20\10B$!\40\0\353Z\2061\202\20\40\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40"
  "\0A\10A\10\202\20$!iJ-\214\341\334\301\365\341\365\341\365\241\233A\10\313"
  "Z}\357\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377<\347"
  "\337\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\3777\367k\356k\356e"
  "\264\301\40\0\0\0\0\0\0\0\0\0\0\0\0$!e)\303\30Mk\2461\202\20\40\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\40\0a\10\242\20\343\30$!\2061(BMkd\274A\345\301\365\341\365\341\365\341"
  "\365\201\233\40\0IJ\34\347\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377<\347\337\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\307"
  "\345!\366\202\366\2\356\341\40\0\0\0\0\0\0\0\0\0\0\40\0\343\30\303\30\"\315"
  "k\234\10B\303\30\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\40\0\202\20$!\3079iJ\252R,c\317{\207\254\241\324"
  "a\355\301\365\341\365\341\365\341\365\341\355ab\0\0e)8\306\377\377\377\377"
  "\377\377\377\377\377\377\377\377]\357\236\367\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\207\345\301\365!\366!\325\200\20\0\0\0\0\0\0\0\0\0\0"
  "\0\0\40\0\341zA\356\2\356\212R\4!A\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0a\10$!(B\305\233d\274\201\314A\304"
  "A\304\301\324A\345\301\365\341\365\341\365\341\365\341\365\341\365a\345\0"
  ")\0\0\242\20\363\234\337\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\337\377\236\367\207\345\241\355\301"
  "\355\301\324\0)\0\0\0\0\0\0\0\0\0\0\0\0@9a\345\341\355\301\355)sE)a\10\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40"
  "\0\242\20\2461\305\233\301\324A\345a\345A\345A\345\201\355\301\365\341\365"
  "\341\365\341\365\341\365\341\365\341\365!\366\201\274A\10\0\0\40\0\256s\236"
  "\367\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377<\3478\306F\325\201\355\201\355\241\324\340\212`\20\0\0\0\0\0\0\40\0"
  "`A\201\314\201\355\241\355\241\355\213{\3079\242\20\40\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0A\10\343\30(B$\264A\345"
  "\241\355\301\365\301\365\301\365\341\365\341\365\341\365\341\365\341\365"
  "\341\365\341\365\341\365\341\365\2\356\40b\0\0\0\0\0\0\10B\373\336\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377y\3168\306'\325a"
  "\345a\345\341\334!\304a\243\201rab\201r\200\243A\304A\345\241\355\301\365"
  "\301\365\213\244iJ\4!a\10\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\40\0\343\30iJd\274A\345\241\355\341\365\341\365\341"
  "\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341"
  "\365!\366\"\315\200\20\0\0\0\0\0\0$!\333\336\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\337\377y\3168\306\10\315A\345\201\355!\345\241\324\201"
  "\314A\304!\304A\304\241\324A\345\301\365\341\365\341\365\301\365a\345\213"
  "{\3479\343\30a\10\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0A\10\343\30iJ&\254!\345\241\355\341\365\341\365\341\365\341\365"
  "\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365"
  "!\366!\213\0\0\0\0\0\0\0\0iJ\337\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\337\377\272\3268\306\245\274\1\335\201\355a\355!\345\341\334\301\324"
  "\301\324\341\334A\345\241\355\341\365\341\365\341\365\341\365\301\365\5\315"
  ",c\3079\343\30a\10\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0A\10\343\30IJ&\254\341\334\201\355\341\365\341\365\341\365\341\365"
  "\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365"
  "!\366\301\345@9\0\0\0\0\0\0\242\20}\357\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\34\347\327\275$\264\341\334\201\355\241\355\201\355a\345A\345"
  "A\345a\345\201\355\301\365\341\365\341\365\341\365\341\365\301\365\241\355"
  "\5\315Mk\10B\4!a\10\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\40\0\303\30(B(\244\301\324\201\355\341\365\341\365\341\365\341\365\341"
  "\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341"
  "\365!\366\201\274`\20\0\0\0\0e)\276\367\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\373\336\252RA\233\341\334\201\355\301\365\301\365\301\365\241"
  "\355\241\355\301\365\301\365\301\365\341\365\341\365\341\365\341\365\341"
  "\365\341\365\301\365a\345\311\213\10B\343\30A\10\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0\303\30(B(\244\241\324\201\355\341\365\341"
  "\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341"
  "\365\341\365\341\365\341\365\341\365\2\356\341z\4!Mk\373\336\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\236\367\212R`\20a\243\341\334\201\355"
  "\301\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365"
  "\341\365\341\365\341\365\341\365\341\365\341\365\341\365\301\365(\244e)\202"
  "\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0A\10\343\30iJ(\244"
  "\241\324\201\355\301\365\341\365\341\365\341\365\341\365\341\365\341\365"
  "\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365!\366a\325"
  "\222\275\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\333\336"
  "\3079\0\0\200\20\200\243\341\334\201\355\301\365\341\365\341\365\341\365"
  "\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365"
  "\341\365\341\365\301\365\301\365\245\274\2461\242\20\40\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0a\10$!\252R$\264\301\324\201\355\301\365"
  "\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365"
  "\341\365\341\365\341\365\341\365\341\365\341\365\2\356\201\274\272\326\377"
  "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\337\377U\255\303\30\0\0\0\0\301\40a\243\1\335"
  "\241\355\301\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365"
  "\341\365\341\365\341\365\341\365\341\365\341\365\301\365\201\355!\345\311"
  "\213e)\202\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0\202\20"
  "\2061Kk!\304!\345\301\365\341\365\341\365\341\365\341\365\341\365\341\365"
  "\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365"
  "\301\365\301\345\1\325e\213\34\347\377\377\377\377\377\377\377\377\377\377"
  "\377\377\377\377\377\377\377\377\377\377\377\3778\306\10B\0\0\0\0\0\0\0\0"
  "\0""1A\233\1\335\241\355\301\365\341\365\341\365\341\365\341\365\341\365"
  "\341\365\341\365\341\365\341\365\341\365\341\365\341\365\301\365a\355\301"
  "\324\305\233\10B\343\30A\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\40\0\242\20\3079\307\233\201\314a\355\301\365\301\365\341\365\341\365"
  "\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365"
  "\341\365\341\365\341\365\301\365\201\355\1\325a\243@9Q\214\333\336\337\377"
  "\377\377\377\377\377\377\337\377\236\367\232\326\222\224\10B\40\0\0\0\0\0"
  "\0\0\0\0\0\0@9a\243\341\334\201\355\341\365\341\365\341\365\341\365\341\365"
  "\341\365\341\365\341\365\341\365\341\365\341\365\241\355a\345\341\334d\274"
  "\213{(B$!\202\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40"
  "\0\242\20\3479\345\253\201\314!\345\201\355\241\355\301\365\301\365\301\365"
  "\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365\341\365"
  "\341\365\341\365\341\365\201\355\341\334\240\253\240Q\0\0\40\0\343\30\246"
  "1\3479\2061$!a\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0\240Q\200\243\301\324"
  "\201\355\341\365\341\365\341\365\341\365\341\365\341\365\341\365\301\365"
  "\241\355\241\355a\345\241\324&\254\213{\212R\2461\4!\202\20\40\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0\202\20\2061\244\233!\304"
  "\201\314\341\334\1\335!\345A\345a\345\201\355\241\355\241\355\301\365\301"
  "\365\341\365\341\365\341\365\341\365\341\365\341\365\301\365a\345\241\324"
  "a\243\40jA\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\40\0\340Y\200\243\201\314a\345\301\365\341\365\341\365\341\365\301\365\301"
  "\365\241\355a\345!\345\301\324$\264\213{\252R\3079$!\242\20A\10\40\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0a\10\4!(Bf\213\244"
  "\233\200\243\300\263!\304A\304\201\314\201\314\301\324\1\335!\345a\345\241"
  "\355\301\365\301\365\301\365\301\365\301\365\241\355\341\334!\274\0\233\40"
  "j`\20\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0\240"
  "Q\0\233!\304\1\335\201\355\241\355\301\365\301\365\241\355\201\355!\345\201"
  "\314!\304\307\233\353Z\3479E)\242\20a\10\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0\202\20\4!\3079iJ\13c\213{e"
  "\213A\233a\243\200\243\240\253\300\263!\274A\304\241\324\1\335A\345\201\355"
  "\201\355a\355\1\335A\304a\243\200\202\340YA\10\0\0\0\0\202\20$!$!$!$!$!$"
  "!$!$!$!\303\30\0\0\0\0\40\0`A\340\212\240\253\201\314\1\335a\345a\355a\345"
  "\1\335\241\324!\304a\243\213{\212R\2061\343\30a\10\40\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0a\10\242"
  "\20\4!E)\3079IJ\252R\13c({\5\203\243z\340\212\0\233a\243\300\263!\274A\304"
  "\201\314\201\314\300\263A\233\200\202\40j\0""1\2461mk\13c\252R\212RiJiJi"
  "JiJiJiJiJ\212R\252R\353ZMk,c\4R\200zA\233\300\263!\304\201\314\201\314\201"
  "\314!\304\240\253!\213Kk(BE)\242\20A\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0A\10a"
  "\10\242\20\343\30$!\2061\3479IJ\313Z\13c)s\243z\200z\340\212\0\233\0\233"
  "\0\233\240\212\200z\40b\3R\13c\212R\3079e)$!\4!\4!\4!\4!\4!\4!\4!\4!\4!$"
  "!E)\2461\212R\251Z\340Y\240\202A\233\200\243\240\253\240\253\200\243\0\233"
  "\243z\13c\3479\4!\202\20\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0"
  "\40\0A\10\202\20\242\20\343\30E)\2061\10B\252R\13c\247j\40b\40j\40j\40j\340"
  "Y\344Q\313Z\3479$!\242\20a\10A\10A\10A\10A\10A\10A\10\40\0A\10A\10A\10A\10"
  "a\10\242\20E)(B\210Z\240Q\40j\200z\340\212\240\202\201r\206b\252R\3079\343"
  "\30a\10\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\40\0A\10a\10\202\20\303\30$!\2461(B\252R\251Z\210Z\210Z\252RIJ\2061\343"
  "\30a\10\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0\202"
  "\20\4!\3079\212R\210Z\210Z\210Z\250Z\251ZIJ\2061\303\30a\10\40\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0"
  "\40\0a\10\202\20\343\30$!e)\2461\2061E)\343\30\202\20A\10\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0a\10\303\30$!\2061\307"
  "9\3079\2461E)\343\30\202\20A\10\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0\40\0A\10a\10"
  "\202\20\202\20a\10A\10\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\40\0a\10\202\20\242\20\242\20\202\20a\10A"
  "\10\40\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
  "\0\0\0\0\0\0\0\0",
};

void pci_init()
{
    printf("\nPCI initializing\n");

#ifdef __PPC__
    pok_bsp_t pok_bsp;
    pok_bsp_get_info(&pok_bsp);
    bridge = pok_bsp.pci_bridge;

    //TODO add pci_bridge too?
    static uint32_t bar0_addr = 0x1001;
    const uint32_t BAR0_SIZE = 0x100;

    printf("bridge cfg_addr: %p cfg_data: %p\n",
            (void *)bridge.cfg_addr, (void *)bridge.cfg_data);

    out_be32((uint32_t *) (bridge.cfg_addr + PEX1_PEXOWBAR1), bridge.iorange>>12);
    out_be32((uint32_t *) (bridge.cfg_addr + PEX1_PEXOWAR1), WAR_EN|WAR_RTT_IO|WAR_WTT_IO|WAR_OWS_8K);

#endif

    for (unsigned int bus = 0; bus < PCI_BUS_MAX; bus++)
      for (unsigned int dev = 0; dev < PCI_DEV_MAX; dev++)
      {
            int fun = 0;
            // Currently we do not handle type 1 or 2 PCI configuration spaces
            if ((pci_read(bus, dev, fun, PCI_REG_HEADERTYPE) & 0xFF) != 0)
                continue;
            printf(">>>%02x:%02x:%02x \n", bus, dev, fun);
            if (dev == 1) {

                printf("initializing BAR0 for 1 dev\n");
                    struct pci_device pci_dev;
                    pci_dev.bus = bus;
                    pci_dev.dev = dev;
                    pci_dev.fun = fun;

                    pci_write_dword(&pci_dev, PCI_REG_BAR0, VGA_ADDR);
                    pci_write_word(&pci_dev, PCI_REG_COMMAND, PCI_COMMAND_MEMORY);

                    out_le16((void *)(0xe1000000 + VBE_DISPI_IOPORT_INDEX), VBE_DISPI_INDEX_ENABLE);
                    out_le16((void *)(0xe1000000 + VBE_DISPI_IOPORT_DATA), 0);

                    out_le16((void *)(0xe1000000 + VBE_DISPI_IOPORT_INDEX), VBE_DISPI_INDEX_XRES);
                    out_le16((void *)(0xe1000000 + VBE_DISPI_IOPORT_DATA), 800);

                    out_le16((void *)(0xe1000000 + VBE_DISPI_IOPORT_INDEX), VBE_DISPI_INDEX_YRES);
                    out_le16((void *)(0xe1000000 + VBE_DISPI_IOPORT_DATA), 600);

                    out_le16((void *)(0xe1000000 + VBE_DISPI_IOPORT_INDEX), VBE_DISPI_INDEX_BPP);
                    out_le16((void *)(0xe1000000 + VBE_DISPI_IOPORT_DATA), VBE_DISPI_BPP_16);

                    out_le16((void *)(0xe1000000 + VBE_DISPI_IOPORT_INDEX), 4);
                    out_le16((void *)(0xe1000000 + VBE_DISPI_IOPORT_DATA), 1);

                    out_8((void *) 0xe10003c0, 0x20); // PAS

                    /*
                    for (int i = 0; i < 800*600; i++) {
                        out_be32((uint32_t *) VGA_ADDR + i, 0x00FF0000);
                    //    out_be16((uint16_t *) VGA_ADDR + i, 0xe000);
                    }*/
                    for (int y = 0; y < gimp_image.height; y++) {
                        for (int x = 0; x < gimp_image.width; x++) {
                            //out_be16((uint16_t *) VGA_ADDR + y * 800 + x, 0xe000);
                            //for (int i = 0; i<2; i++) {
                            //    out_8((uint8_t *) VGA_ADDR + (y*800+x)*2 + i,
                            //            gimp_image.pixel_data[(y*gimp_image.width + x)*2 + 1-i]);
                            //}
                            out_le16((uint16_t *) VGA_ADDR + y*800+x,
                                ((uint16_t*)gimp_image.pixel_data)[y*gimp_image.width + x]);
                        }
                    }

                    // bridge.iorange
                continue;
            }
            struct pci_device pci_dev;
            pci_dev.bus = bus;
            pci_dev.dev = dev;
            pci_dev.fun = fun;
            pci_dev.vendorid  = (uint16_t) pci_read(bus, dev, fun, PCI_REG_VENDORID);
            pci_dev.deviceid  = (uint16_t) pci_read(bus, dev, fun, PCI_REG_DEVICEID);
            //pci_dev.classcode = (uint16_t) pci_read(bus, dev, fun, PCI_REG_PROGIFID);

            for (int i = 0; i < pci_driver_table_used_cnt; i++) {
                struct pci_driver *pci_driver = &pci_driver_table[i];
                if (pci_match_device(pci_driver->id_table, &pci_dev)) {
                    printf("MATCH %s\n", pci_driver->name);
#ifdef __PPC__
                    pci_write_dword(&pci_dev, PCI_REG_BAR0, bar0_addr);
                    pci_write_word(&pci_dev, PCI_REG_COMMAND, PCI_COMMAND_IO);
                    pci_dev.bar[0] = bridge.iorange + bar0_addr;
                    pci_dev.ioaddr = pci_dev.bar[0] & BAR_IOADDR_MASK;
                    bar0_addr += BAR0_SIZE;
#else
                    pci_dev.bar[0] = pci_read(bus, dev, fun, PCI_REG_BAR0) & BAR_IOADDR_MASK; //TODO!!!!
                    pci_dev.ioaddr = pci_dev.bar[0] & BAR_IOADDR_MASK;
#endif
                    pci_driver->probe(&pci_dev);
                }
            }
        }
    pci_list();
    printf("\n");
}
